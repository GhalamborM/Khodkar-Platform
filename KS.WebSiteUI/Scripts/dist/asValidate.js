$.extend($.fn,{validate:function(n){if(!this.length){n&&n.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var t=$.data(this[0],"validator");if(t)return t;if(this.attr("novalidate","novalidate"),t=new $.validator(n,this[0]),$.data(this[0],"validator",t),t.settings.onsubmit){this.on("click.validate",":submit",function(n){t.settings.submitHandler&&(t.submitButton=n.target);$(this).hasClass("cancel")&&(t.cancelSubmit=!0);$(this).attr("formnovalidate")!==undefined&&(t.cancelSubmit=!0)});this.on("submit.validate",function(n){function i(){var r,i;return t.settings.submitHandler?(t.submitButton&&(r=$("<input type='hidden'/>").attr("name",t.submitButton.name).val($(t.submitButton).val()).appendTo(t.currentForm)),i=t.settings.submitHandler.call(t,t.currentForm,n),t.submitButton&&r.remove(),i!==undefined)?i:!1:!0}return(t.settings.debug&&n.preventDefault(),t.cancelSubmit)?(t.cancelSubmit=!1,i()):t.form()?t.pendingRequest?(t.formSubmitted=!0,!1):i():(t.focusInvalid(),!1)})}return t},valid:function(){var n,t,i;return $(this[0]).is("form")?n=this.validate().form():(i=[],n=!0,t=$(this[0].form).validate(),this.each(function(){n=t.element(this)&&n;n||(i=i.concat(t.errorList))}),t.errorList=i),n},rules:function(n,t){if(this.length){var i=this[0],f,o,u,r,e,s;if(n){f=$.data(i.form,"validator").settings;o=f.rules;u=$.validator.staticRules(i);switch(n){case"add":$.extend(u,$.validator.normalizeRule(t));delete u.messages;o[i.name]=u;t.messages&&(f.messages[i.name]=$.extend(f.messages[i.name],t.messages));break;case"remove":return t?(s={},$.each(t.split(/\s/),function(n,t){s[t]=u[t];delete u[t];t==="required"&&$(i).removeAttr("aria-required")}),s):(delete o[i.name],u)}}return r=$.validator.normalizeRules($.extend({},$.validator.classRules(i),$.validator.attributeRules(i),$.validator.dataRules(i),$.validator.staticRules(i)),i),r.required&&(e=r.required,delete r.required,r=$.extend({required:e},r),$(i).attr("aria-required","true")),r.remote&&(e=r.remote,delete r.remote,r=$.extend(r,{remote:e})),r}}});$.extend($.expr[":"],{blank:function(n){return!$.trim(""+$(n).val())},filled:function(n){var t=$(n).val();return t!==null&&!!$.trim(""+t)},unchecked:function(n){return!$(n).prop("checked")}});$.validator=function(n,t){this.settings=$.extend(!0,{},$.validator.defaults,n);this.currentForm=t;this.init()};$.validator.format=function(n,t){return arguments.length===1?function(){var t=$.makeArray(arguments);return t.unshift(n),$.validator.format.apply(this,t)}:t===undefined?n:(arguments.length>2&&t.constructor!==Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),$.each(t,function(t,i){n=n.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),n)};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(n)))},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(t.which!==9||this.elementValue(n)!=="")&&$.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])===-1&&(n.name in this.submitted||n.name in this.invalid)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(n,t,i){n.type==="radio"?this.findByName(n.name).addClass(t).removeClass(i):$(n).addClass(t).removeClass(i)},unhighlight:function(n,t,i){n.type==="radio"?this.findByName(n.name).removeClass(t).addClass(i):$(n).removeClass(t).addClass(i)}},setDefaults:function(n){$.extend($.validator.defaults,n)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(n){var i=$.data(this.form,"validator"),r="on"+n.type.replace(/^validate/,""),t=i.settings;t[r]&&!$(this).is(t.ignore)&&t[r].call(i,this,n)}this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var i=this.groups={},n;$.each(this.settings.groups,function(n,t){typeof t=="string"&&(t=t.split(/\s/));$.each(t,function(t,r){i[r]=n})});n=this.settings.rules;$.each(n,function(t,i){n[t]=$.validator.normalizeRule(i)});$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t);if(this.settings.invalidHandler)$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(n){var t=this.clean(n),i=this.validationTargetFor(t),r=this,u=!0,f,e;return i===undefined?delete this.invalid[t.name]:(this.prepareElement(i),this.currentElements=$(i),e=this.groups[i.name],e&&$.each(this.groups,function(n,f){f===e&&n!==i.name&&(t=r.validationTargetFor(r.clean(r.findByName(n))),t&&t.name in r.invalid&&(r.currentElements.push(t),u=u&&r.check(t)))}),f=this.check(i)!==!1,u=u&&f,this.invalid[i.name]=f?!1:!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),$(n).attr("aria-invalid",!f)),u},showErrors:function(n){if(n){var t=this;$.extend(this.errorMap,n);this.errorList=$.map(this.errorMap,function(n,i){return{message:n,element:t.findByName(i)[0]}});this.successList=$.grep(this.successList,function(t){return!(t.name in n)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm();this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var n=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(n)},resetElements:function(n){var t;if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,""),this.findByName(n[t].name).removeClass(this.settings.validClass);else n.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)n[i]&&t++;return t},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(n){n.not(this.containers).text("");this.addWrapper(n).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(n){}},findLastActive:function(){var n=this.lastActive;return n&&$.grep(this.errorList,function(t){return t.element.name===n.name}).length===1&&n},elements:function(){var n=this,t={};return $(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||$(this).attr("name");return(!i&&n.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=$(this).closest("form")[0]),i in t||!n.objectLength($(this).rules()))?!1:(t[i]=!0,!0)})},clean:function(n){return $(n)[0]},errors:function(){var n=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+n,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([])},reset:function(){this.resetInternals();this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(n){var u=$(n),r=n.type,t,i;return r==="radio"||r==="checkbox"?this.findByName(n.name).filter(":checked").val():r==="number"&&typeof n.validity!="undefined"?n.validity.badInput?"NaN":u.val():(t=n.hasAttribute("contenteditable")?u.text():u.val(),r==="file")?t.substr(0,12)==="C:\\fakepath\\"?t.substr(12):(i=t.lastIndexOf("/"),i>=0)?t.substr(i+1):(i=t.lastIndexOf("\\"),i>=0)?t.substr(i+1):t:typeof t=="string"?t.replace(/\r/g,""):t},check:function(n){n=this.validationTargetFor(this.clean(n));var t=$(n).rules(),s=$.map(t,function(n,t){return t}).length,o=!1,r=this.elementValue(n),u,f,i;if(typeof t.normalizer=="function"){if(r=t.normalizer.call(n,r),typeof r!="string")throw new TypeError("The normalizer should return a string value.");delete t.normalizer}for(f in t){i={method:f,parameters:t[f]};try{if(u=$.validator.methods[f].call(this,r,n,i.parameters),u==="dependency-mismatch"&&s===1){o=!0;continue}if(o=!1,u==="pending"){this.toHide=this.toHide.not(this.errorsFor(n));return}if(!u)return this.formatAndAdd(n,i),!1}catch(e){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+n.id+", check the '"+i.method+"' method.",e);e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+n.id+", check the '"+i.method+"' method.");throw e;}}if(!o)return this.objectLength(t)&&this.successList.push(n),!0},customDataMessage:function(n,t){return $(n).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||$(n).data("msg")},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(n,t){var i=this.findDefined(this.customMessage(n.name,t.method),this.customDataMessage(n,t.method),!this.settings.ignoreTitle&&n.title||undefined,$.validator.messages[t.method],"<strong>Warning: No message defined for "+n.name+"<\/strong>"),r=/\$?\{(\d+)\}/g;return typeof i=="function"?i=i.call(this,t.parameters,n):r.test(i)&&(i=$.validator.format(i.replace(r,"{$1}"),t.parameters)),i},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t);this.errorList.push({message:i,element:n,method:t.method});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(n,t){var r,o,f,e,i=this.errorsFor(n),s=this.idOrName(n),u=$(n).attr("aria-describedby");i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(t)):(i=$("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(t||""),r=i,this.settings.wrapper&&(r=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,$(n)):r.insertAfter(n),i.is("label")?i.attr("for",s):i.parents("label[for='"+this.escapeCssMeta(s)+"']").length===0&&(f=i.attr("id"),u?u.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(u+=" "+f):u=f,$(n).attr("aria-describedby",u),o=this.groups[n.name],o&&(e=this,$.each(e.groups,function(n,t){t===o&&$("[name='"+e.escapeCssMeta(n)+"']",e.currentForm).attr("aria-describedby",i.attr("id"))}))));!t&&this.settings.success&&(i.text(""),typeof this.settings.success=="string"?i.addClass(this.settings.success):this.settings.success(i,n));this.toShow=this.toShow.add(i)},errorsFor:function(n){var i=this.escapeCssMeta(this.idOrName(n)),r=$(n).attr("aria-describedby"),t="label[for='"+i+"'], label[for='"+i+"'] *";return r&&(t=t+", #"+this.escapeCssMeta(r).replace(/\s+/g,", #")),this.errors().filter(t)},escapeCssMeta:function(n){return n.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name)),$(n).not(this.settings.ignore)[0]},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(n){return $(this.currentForm).find("[name='"+this.escapeCssMeta(n)+"']")},getLength:function(n,t){switch(t.nodeName.toLowerCase()){case"select":return $("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return n.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(n,t){return!!$(n,t.form).length},"function":function(n,t){return n(t)}},optional:function(n){var t=this.elementValue(n);return!$.validator.methods.required.call(this,t,n)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,$(n).addClass(this.settings.pendingClass),this.pending[n.name]=!0)},stopRequest:function(n,t){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[n.name];$(n).removeClass(this.settings.pendingClass);t&&this.pendingRequest===0&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!t&&this.pendingRequest===0&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(n,t){return $.data(n,"previousValue")||$.data(n,"previousValue",{old:null,valid:!0,message:this.defaultMessage(n,{method:t})})},destroy:function(){this.resetForm();$(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(n,t){n.constructor===String?this.classRuleSettings[n]=t:$.extend(this.classRuleSettings,n)},classRules:function(n){var t={},i=$(n).attr("class");return i&&$.each(i.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(t,$.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(n,t,i,r){/min|max|step/.test(i)&&(t===null||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=undefined));r||r===0?n[i]=r:t===i&&t!=="range"&&(n[i]=!0)},attributeRules:function(n){var i={},u=$(n),f=n.getAttribute("type"),r,t;for(r in $.validator.methods)r==="required"?(t=n.getAttribute(r),t===""&&(t=!0),t=!!t):t=u.attr(r),this.normalizeAttributeRule(i,f,r,t);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(n){var i={},u=$(n),f=n.getAttribute("type"),t,r;for(t in $.validator.methods)r=u.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(i,f,t,r);return i},staticRules:function(n){var t={},i=$.data(n.form,"validator");return i.settings.rules&&(t=$.validator.normalizeRule(i.settings.rules[n.name])||{}),t},normalizeRules:function(n,t){return $.each(n,function(i,r){if(r===!1){delete n[i];return}if(r.param||r.depends){var u=!0;switch(typeof r.depends){case"string":u=!!$(r.depends,t.form).length;break;case"function":u=r.depends.call(t,t)}u?n[i]=r.param!==undefined?r.param:!0:($.data(t.form,"validator").resetElements($(t)),delete n[i])}}),$.each(n,function(i,r){n[i]=$.isFunction(r)&&i!=="normalizer"?r(t):r}),$.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),$.each(["rangelength","range"],function(){var t;n[this]&&($.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:typeof n[this]=="string"&&(t=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(t[0]),Number(t[1])]))}),$.validator.autoCreateRanges&&(n.min!=null&&n.max!=null&&(n.range=[n.min,n.max],delete n.min,delete n.max),n.minlength!=null&&n.maxlength!=null&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength)),n},normalizeRule:function(n){if(typeof n=="string"){var t={};$.each(n.split(/\s/),function(){t[this]=!0});n=t}return n},addMethod:function(n,t,i){$.validator.methods[n]=t;$.validator.messages[n]=i!==undefined?i:$.validator.messages[n];t.length<3&&$.validator.addClassRules(n,$.validator.normalizeRule(n))},methods:{required:function(n,t,i){if(!this.depend(i,t))return"dependency-mismatch";if(t.nodeName.toLowerCase()==="select"){var r=$(t).val();return r&&r.length>0}return this.checkable(t)?this.getLength(n,t)>0:n.length>0},email:function(n,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)},url:function(n,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)},number:function(n,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},minlength:function(n,t,i){var r=$.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r>=i},maxlength:function(n,t,i){var r=$.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r<=i},rangelength:function(n,t,i){var r=$.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r>=i[0]&&r<=i[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},step:function(n,t,i){var r=$(t).attr("type"),u="Step attribute on input type "+r+" is not supported.",f=new RegExp("\\b"+r+"\\b"),e=r&&!f.test("text,number,range");if(e)throw new Error(u);return this.optional(t)||n%i==0},equalTo:function(n,t,i){var r=$(i);if(this.settings.onfocusout&&r.not(".validate-equalTo-blur").length)r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){$(t).valid()});return n===r.val()},remote:function(n,t,i,r){if(this.optional(t))return"dependency-mismatch";r=typeof r=="string"&&r||"remote";var f=this.previousValue(t,r),u,e,o;return(this.settings.messages[t.name]||(this.settings.messages[t.name]={}),f.originalMessage=f.originalMessage||this.settings.messages[t.name][r],this.settings.messages[t.name][r]=f.message,i=typeof i=="string"&&{url:i}||i,o=$.param($.extend({data:n},i.data)),f.old===o)?f.valid:(f.old=o,u=this,this.startRequest(t),e={},e[t.name]=n,$.ajax($.extend(!0,{mode:"abort",port:"validate"+t.name,dataType:"json",data:e,context:u.currentForm,success:function(i){var e=i===!0||i==="true",o,s,h;u.settings.messages[t.name][r]=f.originalMessage;e?(h=u.formSubmitted,u.resetInternals(),u.toHide=u.errorsFor(t),u.formSubmitted=h,u.successList.push(t),u.invalid[t.name]=!1,u.showErrors()):(o={},s=i||u.defaultMessage(t,{method:r,parameters:n}),o[t.name]=f.message=s,u.invalid[t.name]=!0,u.showErrors(o));f.valid=e;u.stopRequest(t,e)}},i)),"pending")}}});var pendingRequests={},ajax;$.ajaxPrefilter?$.ajaxPrefilter(function(n,t,i){var r=n.port;n.mode==="abort"&&(pendingRequests[r]&&pendingRequests[r].abort(),pendingRequests[r]=i)}):(ajax=$.ajax,$.ajax=function(n){var i=("mode"in n?n:$.ajaxSettings).mode,t=("port"in n?n:$.ajaxSettings).port;return i==="abort"?(pendingRequests[t]&&pendingRequests[t].abort(),pendingRequests[t]=ajax.apply(this,arguments),pendingRequests[t]):ajax.apply(this,arguments)}),function(n){"use strict";n.fn.asValidate=function(t){var i,f;if(n.extend(n.validator.messages,n.asRes[n.asLang].validate,{required:n.asRes[n.asLang].validate.required,remote:n.asRes[n.asLang].validate.remote,email:n.asRes[n.asLang].validate.email,url:n.asRes[n.asLang].validate.url,date:n.asRes[n.asLang].validate.date,dateFA:n.asRes[n.asLang].validate.dateFA,dateISO:n.asRes[n.asLang].validate.dateISO,number:n.asRes[n.asLang].validate.number,digits:n.asRes[n.asLang].validate.digits,creditcard:n.asRes[n.asLang].validate.creditcard,equalTo:n.asRes[n.asLang].validate.equalTo,extension:n.asRes[n.asLang].validate.extension,maxlength:n.validator.format(n.asRes[n.asLang].validate.maxlength),minlength:n.validator.format(n.asRes[n.asLang].validate.minlength),rangelength:n.validator.format(n.asRes[n.asLang].validate.rangelength),range:n.validator.format(n.asRes[n.asLang].validate.range),max:n.validator.format(n.asRes[n.asLang].validate.max),min:n.validator.format(n.asRes[n.asLang].validate.min),minWords:n.validator.format(n.asRes[n.asLang].validate.minWords),maxWords:n.validator.format(n.asRes[n.asLang].validate.maxWords)}),n.validator.defaults=n.extend(n.validator.defaults,{errorClass:"as-validate-error",validClass:"as-validate-valid"}),i=n.as(this),n.type(t)==="string"){if(t==="valid")return n.each(n.data(i.get(0),"rules"),function(t,i){if(i.type==="asDropdown"){var r=n("#"+i.id.replace("_as_hiden","")).asDropdown("selected");r?n("#"+i.id).val(r):n("#"+i.id).val("")}}),f=i.valid(),f===!1&&n.asShowMessage({template:"error",message:n.asRes[n.asLang].validateError}),f;if(t==="validator")return n.validator}else{var r=n.extend(t,{ignore:':hidden:not(".as-validate-hidden")',highlight:function(t,i,r){if(n(t).closest(".form-group").addClass("has-error"),t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r),n(t).attr("name").indexOf("_as_hiden")>=0){var u=n(t).attr("name").replace("_as_hiden","");n(t.form).find("label[for="+u+"]").addClass(i);n("#"+u).addClass(i)}},unhighlight:function(t,i,r){if(n(t).closest(".form-group").removeClass("has-error"),t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r),typeof n(t).attr("name")!="undefined"&&n(t).attr("name").indexOf("_as_hiden")>=0){var u=n(t).attr("name").replace("_as_hiden","");n(t.form).find("label[for="+u+"]").removeClass(i);n("#"+u).removeClass(i)}}}),u={},e=[];return n.each(r.rules,function(n,t){t.asType==="asDropdown"?u[n+"_as_hiden"]=t:u[n]=t}),n.each(u,function(n,t){e.push({id:n,type:t.asType});t.asType&&delete t.asType}),typeof i.get(0)!="undefined"&&n.data(i.get(0),"rules",e),delete r.rules,r.rules=u,i.validate(r)}return this}}(jQuery)