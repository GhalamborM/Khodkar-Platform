$("#i22ce62b2de724a91afcfa223360a4d00").on($.asEvent.page.loaded,function(n,t,i){var o="#i22ce62b2de724a91afcfa223360a4d00",d=".i22ce62b2de724a91afcfa223360a4d00."+$.asPageClass,r=function(n){var t=new $.as({pageId:d});return t.as(n)},it=function(){},st,h,tt;$(o).on($.asEvent.page.dispose,function(){it()});$.asUrls=$.extend({develop_code_browser_GetBundlesOfCodeByDefaultsLanguageByPaging:"/odata/cms/MasterDataKeyValues?$filter=(TypeId%20eq%20@typeIdd)%20and%20(ParentId%20eq%20@parentIdd)&$orderby=@orderby&$skip=@skip&$top=@top&$select=Id%2CName%2CCode%2CPathOrUrl%2CKey%2CValue%2CSecondCode%2CDescription%2CViewRoleId%2CAccessRoleId%2CModifyRoleId%2CRowVersion&$inlinecount=allpages",develop_code_browser_bundle_source_save:"/develop/code/browser/bundle/source/Save",develop_code_browser_bundle_source_delete:"/develop/code/browser/bundle/source/delete"},$.asUrls);var ct=$(d),rt=r("#frmAddOrAupdate"),c=r("#txtPath"),lt=r("#btnTranslator"),g=r("#txtDescription"),wt=r("#btnCancel"),bt=r("#btnSelect"),at=r("#btnEdit"),vt=r("#btnNew"),l=r("#drpViewRole3"),a=r("#drpModifyRole3"),v=r("#drpAccessRole3"),yt=r("#btnSelectPath"),nt=r("#btnDell"),u=r("#grvBundleSources"),e=r("#winAddOrEdit"),ut=$.asModalManager.get({url:$.asModalManager.urls.fileSelector}),ft=$.asModalManager.get({url:$.asModalManager.urls.translator}),kt=r("#divRoles"),y,p,w,et,f=!1,ot,s={items:{}},b="";if(e.asModal({backdrop:"static",keyboard:!1}),ft.asModal({width:800}),ut.asModal({width:800}),st={txtPath:{required:!0,maxlength:1024},txtDescription:{maxlength:256},drpViewRole:{asType:"asDropdown",required:!0},drpAccessRole:{asType:"asDropdown",required:!0},drpModifyRole:{asType:"asDropdown",required:!0}},et=rt.asValidate({rules:st}),h=function(n){n===null?(c.val(i.codePath),g.val(""),l.asDropdown("selectValue",i.viewRoleId),y=i.viewRoleId,v.asDropdown("selectValue",i.accessRoleId),p=i.accessRoleId,a.asDropdown("selectValue",i.modifyRoleId),w=i.modifyRoleId):(c.val(n.PathOrUrl),g.val(n.Description),l.asDropdown("selectValue",n.ViewRoleId),y=n.ViewRoleId,v.asDropdown("selectValue",n.AccessRoleId),p=n.AccessRoleId,a.asDropdown("selectValue",n.ModifyRoleId),w=n.ModifyRoleId)},tt=function(n,t){n.type==="selected"?s.items[t[0].Id]={Id:t[0].Id,Key:t[0].Key,Name:t[0].Name,Description:t[0].Description,PathOrUrl:t[0].PathOrUrl,RowVersion:t[0].RowVersion,ViewRoleId:t[0].ViewRoleId,AccessRoleId:t[0].AccessRoleId,ModifyRoleId:t[0].ModifyRoleId}:delete s.items[t[0].Id]},i){b=i.bundleId;l.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:i.roles}});v.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:i.roles}});a.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:i.roles}});h(null);u.asBootGrid({rowCount:[10,25,50,100],source:{url:""},requestHandler:function(n){if(b!==""){var t="PathOrUrl desc",i=0;return n.current>1&&(i=(n.current-1)*n.rowCount),$.each(n.sort,function(n,i){t=n+" "+i}),n.url=$.asInitService($.asUrls.develop_code_browser_GetBundlesOfCodeByDefaultsLanguageByPaging,[{name:"@typeId",value:1034},{name:"@parentId",value:b},{name:"@top",value:n.rowCount},{name:"@skip",value:i},{name:"@orderby",value:t}]),s.items={},n}},selection:!0,rowSelect:!0}).on("selected.rs.jquery.asBootGrid",function(n,t){tt(n,t)}).on("deselected.rs.jquery.asBootGrid",function(n,t){tt(n,t)})}var k=function(){var n=[];return $.each(s.items,function(t,i){n.push(i)}),n},ht=function(){$.asShowMessage({message:$.asRes[$.asLang].successOpration});s.items={};u.asBootGrid("deselect")},pt=function(){$(o).on($.asEvent.modal.reopen,function(n,t){t.bundleId!==i.bundleId&&(i=t,b=i.bundleId,h(null),u.asBootGrid("reload"))});$(o).on($.asEvent.page.ready,function(){});$(o).on("fileSelected",function(n,t,i,r){c.val(t);ot=r});at.click(function(){var n=k();n.length===1?(f=!1,h({PathOrUrl:n[0].PathOrUrl,Description:n[0].Description,RowVersion:n[0].RowVersion,ViewRoleId:i.viewRoleId,AccessRoleId:i.accessRoleId,ModifyRoleId:i.modifyRoleId}),e.asModal("show")):$.asShowMessage({template:"error",message:"   باید یک buneSourcele انتخاب شود"})});vt.click(function(){f=!0;h(null);e.asModal("show")});lt.click(function(){var n=k();n.length===1?ft.asModal("load",$.asInitService($.asFormUrl,[{name:"@url",value:$.asUrlAsParameter($.asModalManager.urls.translator)},{name:"@isModal",value:!0}]),{type:"masterDataKeyValue",id:n[0].Id,name:n[0].Name,description:n[0].Description}):$.asShowMessage({template:"error",message:"   باید یک buneSourcele انتخاب شود"})});l.on("change",function(n,t){typeof t.value!="undefined"&&(y=t.value)});v.on("change",function(n,t){typeof t.value!="undefined"&&(p=t.value)});a.on("change",function(n,t){typeof t.value!="undefined"&&(w=t.value)});r("#btnExecute").click(function(){var n=k();e.asAjax({url:$.asUrls.develop_code_browser_bundle_source_save,data:JSON.stringify({Id:f===!0?0:n[0].Id,Name:ot,ParentId:i.bundleId,TypeId:1033,ParentTypeId:"",IsPath:!0,PathOrUrl:c.val(),ViewRoleId:y,ModifyRoleId:w,AccessRoleId:p,Description:g.val(),Status:!0,EnableCache:!1,EditMode:!1,IsLeaf:!0,IsType:!1,IsNew:f,RowVersion:f===!0?"":n[0].RowVersion}),success:function(n){f===!0?f=!1:u.asBootGrid("remove");u.asBootGrid("append",[n]);ht();e.asModal("hide")}},{$form:rt,overlayClass:"as-overlay-absolute"})});r("#btnCancel").click(function(){e.asModal("hide")});yt.click(function(){ut.asModal("load",$.asInitService($.asFormUrl,[{name:"@url",value:$.asUrlAsParameter($.asModalManager.urls.fileSelector)},{name:"@isModal",value:!0}]),{path:i.codePath,parent:o,event:"fileSelected"})});nt.click(function(){var n=k();n.length===1?(ct.asAjax({url:$.asUrls.develop_code_browser_bundle_source_delete,data:JSON.stringify({Id:n[0].Id}),success:function(){nt.button("reset");u.asBootGrid("remove");ht()}},{validate:!1,overlayClass:"as-overlay-absolute"}),nt.button("loading")):$.asShowMessage({template:"error",message:"   باید یک buneSourcele انتخاب شود"})});it=function(){u.asBootGrid("destroy");et.destroy()}};pt();$(d).append('<span id="asRegisterPage"><\/span>');r("#asRegisterPage").asRegisterPageEvent();typeof t!="undefined"&&$.asLoadPage(t,t.replace(/\//g,$.asUrlDelimeter))})