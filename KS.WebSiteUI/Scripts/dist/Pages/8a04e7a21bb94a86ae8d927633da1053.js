$("#i8a04e7a21bb94a86ae8d927633da1053").on($.asEvent.page.loaded,function(n,t,i){var v="#i8a04e7a21bb94a86ae8d927633da1053",y=".i8a04e7a21bb94a86ae8d927633da1053."+$.asPageClass,o=function(n){var t=new $.as({pageId:y});return t.as(n)},w=function(){},g;$(v).on($.asEvent.page.dispose,function(){w()});$.asUrls=$.extend({fms_GetFoldersOfPathByPaging:"/fms/GetFoldersByPagination/@path/@orderby/@skip/@take"},$.asUrls);var b=$(y),nt=o("#btnCancel"),tt=o("#btnSelect"),u=o("#grvFolder"),s=o("#divPath"),e="",h,k,r=[],f=0,a,c,p=!1,d=function(){f++;p=!0;u.asBootGrid("reload")},it=function(){var n;if(s.empty(),l(-1,"..."),f=$(this).data("index"),f===-1){for(f=0,n=0;n<=r.length-1;n++)r[n]=null;p=!1;u.asBootGrid("reload")}else{for(c=a,n=0;n<=r.length-1;n++)n<=f&&r[n]!==null?l(n,r[n]):r[n]=null;d()}},l=function(n,t){var i=$("<span  data-index='"+n+"' style='font-weight: bold;cursor: pointer;'>"+t+"<\/span> > ");s.append(i);i.click(it);n!==-1&&(c+="/"+t)};i&&(e=i.path,s.empty(),l(-1,"..."));u.asBootGrid({rowCount:[10,25,50,100],source:{url:""},requestHandler:function(n){var t,i,r;if(e!=="")return t="",p?t=c.replace(/\//g,$.asUrlDelimeter):(a=e,t=a.replace(/\//g,$.asUrlDelimeter)),i="Name desc",r=0,n.current>1&&(r=(n.current-1)*n.rowCount),$.each(n.sort,function(n,t){i=n+" "+t}),n.url=$.asInitService($.asUrls.fms_GetFoldersOfPathByPaging,[{name:"@path",value:t},{name:"@orderby",value:i},{name:"@skip",value:r},{name:"@take",value:n.rowCount}]),u.asBootGrid("deselect"),n},formatters:{Name:function(n,t){return t.IsFolder?"<span class='folder-link' data-row='"+JSON.stringify(t)+"' style='font-weight: bold;cursor: pointer;'><i class='glyphicon glyphicon-folder-open'><\/i> &nbsp;"+t.Name+"<\/span>":"<span><i class='glyphicon glyphicon-file'><\/i> &nbsp;"+t.Name+"<\/span>"}},selection:!0,rowSelect:!0}).on("selected.rs.jquery.asBootGrid",function(n,t){h=t[0].Name;k=t[0].Id}).on("deselected.rs.jquery.asBootGrid",function(){h=""}).on("loaded.rs.jquery.asBootGrid",function(){$(".folder-link").click(function(){var n=$(this).data("row"),t;n.IsFolder&&(t=$.inArray(n.Name,r),t===-1&&(r[f]=n.Name,s.empty(),l(-1,"..."),c=e,$.each(r,function(n,t){t!==null&&l(n,t)}),d()))})});g=function(){$(v).on($.asEvent.modal.reopen,function(n,t){(t.path!==i.path||t.parent!==i.parent||t.event!==i.event)&&(i=t,c=a=e=i.path,s.empty(),r=[],f=0,u.asBootGrid("reload"))});$(v).on($.asEvent.page.ready,function(){});nt.on("click",function(){b.asModal("hide")});tt.on("click",function(){if(h!=""&&typeof h!="undefined"&&u.asBootGrid("getTotalRowCount")!==0){if(i){var n=e;$.each(r,function(t,i){i!==null&&t!=-1&&(n+="/"+i)});$(i.parent).trigger(i.event,[(n+"/"+h).replace(new RegExp("//","gi"),"/"),k])}b.asModal("hide")}else $.asShowMessage({template:"error",message:"مسیری انتخاب نشده است"})});w=function(){u.asBootGrid("destroy")}};g();$(y).append('<span id="asRegisterPage"><\/span>');o("#asRegisterPage").asRegisterPageEvent();typeof t!="undefined"&&$.asLoadPage(t,t.replace(/\//g,$.asUrlDelimeter))})