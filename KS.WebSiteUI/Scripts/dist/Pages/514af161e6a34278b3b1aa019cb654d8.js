$("#i514af161e6a34278b3b1aa019cb654d8").on($.asEvent.page.loaded,function(n,t){var s="#i514af161e6a34278b3b1aa019cb654d8",g=".i514af161e6a34278b3b1aa019cb654d8."+$.asPageClass,i=function(n){var t=new $.as({pageId:g});return t.as(n)},nt=function(){},st,ht;$(s).on($.asEvent.page.dispose,function(){nt()});$.asUrls=$.extend({cms_masterDataKeyValue_GetByDefaultsLanguageAndTypeId:"/odata/cms/MasterDataKeyValues?$filter=TypeId%20eq%20@typeIdd&$select=Id%2CParentId%2CCode%2CPathOrUrl%2COrder%2CName%2CIsLeaf%2CKey%2CValue",security_Role_getAllByDefaultsLanguage:"/odata/security/Roles?$select=Id%2CParentId%2CName%2COrder%2CIsLeaf%2CDescription",cms_filePath_GetByDefaultsLanguagesAndTypeCodeAndPathByPaging:"/odata/cms/FilePaths?$filter=(TypeCode%20eq%20@typeCoded)%20and%20(startswith(Url%2C'@path')%20eq%20true)&$orderby=@orderby&$skip=@skip&$top=@top&$select=Id%2CName%2CUrl%2CStatus%2CSize&$inlinecount=allpages",cms_filePath_save:"/cms/filepath/Save",cms_filePath_getById:"/odata/cms/FilePaths?$filter=Id%20eq%20@idd&$select=Id%2CName%2CDescription%2CUrl%2CGuid%2CStatus%2CSize%2CViewRoleId%2CTypeCode%2CAccessRoleId%2CModifyRoleId%2CRowVersion",cms_filePath_delete:"/cms/filepath/delete"},$.asUrls);var tt=i("#frm"),it=$.asModalManager.get({url:$.asModalManager.urls.fileSelector}),f=i("#winAddOrEdit"),rt=$.asModalManager.get({url:$.asModalManager.urls.translator}),h=i("#drpFileType"),e=i("#drpPath"),c=i("#txtName"),l=i("#txtPath"),a=i("#txtDescription"),b=i("#txtGuId"),r=i("#grvFile"),lt=i("#btnNew"),at=i("#btnTranslator"),vt=i("#btnEdit"),yt=i("#btnSelectFile"),o=i("#btnDell"),pt=i("#btnExecute"),ut=i("#chkStatus"),wt=i("#divRoles"),ft=i("#divGuid"),v=i("#drpViewRole"),y=i("#drpModifyRole"),p=i("#drpAccessRole"),w=i("#drpFileTypeAddUpdate"),u={hasFolder:function(){var n=!1;return $.each(this.items,function(t,i){i===!0&&(n=!0)}),n},path:"",items:{}},k=0,d="",et='<div class="as-material-switch container-fluid @class"><div><input name="chkStatusGrid" type="checkbox" @status /><label class="label-default as-label" for="chkStatusGrid" >  <\/label><\/div><\/div>',ot,bt=function(){$.asShowMessage({message:$.asRes[$.asLang].successOpration});u.items={};r.asBootGrid("deselect")},kt={drpFileTypeAddUpdate:{asType:"asDropdown",required:!0},drpViewRole:{asType:"asDropdown",required:!0},drpAccessRole:{asType:"asDropdown",required:!0},drpModifyRole:{asType:"asDropdown",required:!0},txtName:{required:!0},txtPath:{required:!0},txtGuId:{required:{depends:function(n){return $(n).is(":visible")}}}};ot=tt.asValidate({rules:kt});rt.asModal({width:800});f.asModal({backdrop:"static",keyboard:!1});it.asModal({width:800});st=function(){return $.asAjaxTask({url:$.asInitService($.asUrls.cms_masterDataKeyValue_GetByDefaultsLanguageAndTypeId,[{name:"@typeId",value:1009}])})};i("#divFileType").asAfterTasks([st()],function(n){h.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},removeChildLessParent:!1},localData:n,displayDataField:"Name",valueDataField:"Code",orderby:"Order"},selectParents:!0,parentMode:"uniq"});w.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},removeChildLessParent:!1},localData:n,displayDataField:"Name",valueDataField:"Code",orderby:"Order"},selectParents:!0,parentMode:"uniq"})},{overlayClass:"as-overlay-relative"});e.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},removeChildLessParent:!1},url:$.asInitService($.asUrls.cms_masterDataKeyValue_GetByDefaultsLanguageAndTypeId,[{name:"@typeId",value:1025}]),displayDataField:"Name",valueDataField:"PathOrUrl",orderby:"Order"},selectParents:!0,parentMode:"uniq"});ht=function(){return $.asAjaxTask({url:$.asUrls.security_Role_getAllByDefaultsLanguage})};wt.asAfterTasks([ht()],function(n){v.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:n}});p.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:n}});y.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},childrenDataField:"Children",removeChildLessParent:!0},valueDataField:"Id",displayDataField:"Description",orderby:"Order",localData:n}})},{overlayClass:"as-overlay-relative"});var gt=function(){r.asBootGrid("reload")},ct=function(n,t){n.type==="selected"?u.items[t[0].Name]=t[0].Id:delete u.items[t[0].Name]},dt=function(){var n=function(){$.asNotFound(" مسیر")},t=function(n){var t=n[0];k=t.Id;t.Url!==null?l.val(t.Url):l.val("");t.Name!==null?c.val(t.Name):c.val("");t.Description!==null?a.val(t.Description):a.val("");t.Guid!==null?b.val(t.Guid):b.val("");ut.prop("checked",t.Status);t.TypeCode!==null?w.asDropdown("selectValue",t.TypeCode):w.asDropdown("selectValue",[],!0);t.ViewRoleId!==null?v.asDropdown("selectValue",t.ViewRoleId):v.asDropdown("selectValue",[],!0);t.AccessRoleId!==null?p.asDropdown("selectValue",t.AccessRoleId):p.asDropdown("selectValue",[],!0);t.ModifyRoleId!==null?y.asDropdown("selectValue",t.ModifyRoleId):y.asDropdown("selectValue",[],!0);d=t.RowVersion!==null?t.RowVersion:""};$(s).on("fileSelected",function(n,t){l.val(t.replace("~",""))});$(s).on($.asEvent.page.ready,function(){r.asBootGrid({rowCount:[10,25,50,100],source:{url:""},requestHandler:function(n){var t,i,f;return e.asDropdown("selected")&&h.asDropdown("selected")?(u.items={},u.path="",t=e.asDropdown("selected").value.replace("~",""),u.path=t,i="Name desc",f=0,n.current>1&&(f=(n.current-1)*n.rowCount),$.each(n.sort,function(n,t){i=n+" "+t}),n.url=$.asInitService($.asUrls.cms_filePath_GetByDefaultsLanguagesAndTypeCodeAndPathByPaging,[{name:"@path",value:t},{name:"@typeCode",value:h.asDropdown("selected").value},{name:"@orderby",value:i},{name:"@skip",value:f},{name:"@top",value:n.rowCount}]),u.items={},r.asBootGrid("deselect"),n):null},formatters:{Status:function(n,t){return t.Status?et.replace("@status",'checked="checked"').replace("@class","status"):et.replace("@status","").replace("@class","")}},selection:!0,rowSelect:!0,multiSelect:!0}).on("selected.rs.jquery.asBootGrid",function(n,t){ct(n,t)}).on("deselected.rs.jquery.asBootGrid",function(n,t){ct(n,t)})});e.on("change",function(){r.asBootGrid("reload")});h.on("change",function(){r.asBootGrid("reload")});yt.click(function(){e.asDropdown("selected")?it.asModal("load",$.asInitService($.asFormUrl,[{name:"@url",value:$.asUrlAsParameter($.asModalManager.urls.fileSelector)},{name:"@isModal",value:!0}]),{path:e.asDropdown("selected").value,parent:s,event:"fileSelected"}):$.asShowMessage({template:"error",message:"هیچ مسیری انتخاب نشده است"})});lt.click(function(){ft.hide();t([{Id:0,Guid:null,Name:null,Description:null,Url:null,Status:!1,ViewRoleId:null,ModifyRoleId:null,AccessRoleId:null,TypeCode:null,RowVersion:null}]);f.asModal("show")});o.click(function(){var n=[];$.each(u.items,function(t,i){n.push(i)});n.length===1?(o.asAjax({url:$.asUrls.cms_filePath_delete,data:JSON.stringify({Id:n[0]}),success:function(){o.button("reset");r.asBootGrid("remove");bt()},error:function(){o.button("reset")}},{validate:!1,overlayClass:"as-overlay-absolute"}),o.button("loading")):$.asShowMessage({template:"error",message:"مسیری برای حذف انتخاب نشده است."})});vt.click(function(){var i=[];$.each(u.items,function(n,t){i.push(t)});i.length===1?(ft.show(),f.asModal("show"),f.asAjax({url:$.asInitService($.asUrls.cms_filePath_getById,[{name:"@id",value:i[0]}]),type:"get",success:function(i){$.isArray(i)?i.length>0?t(i):n():i!=null?typeof i!="undefined"?t(i):n():n()}},{overlayClass:"as-overlay-absolute"})):$.asShowMessage({template:"error",message:"هیچ مسیری انتخاب نشده است"})});i("#btnCancel").click(function(){f.asModal("hide")});at.click(function(){var n=[];$.each(u.items,function(t,i){n.push(i)});n.length===1?rt.asModal("load",$.asInitService($.asFormUrl,[{name:"@url",value:$.asUrlAsParameter($.asModalManager.urls.translator)},{name:"@isModal",value:!0}]),{type:"filePath",id:n[0],name:c.val(),description:a.val()}):$.asShowMessage({template:"error",message:"هیچ مسیری انتخاب نشده است"})});pt.click(function(){f.asAjax({url:$.asUrls.cms_filePath_save,data:JSON.stringify({Id:k,Url:l.val(),Guid:b.val(),Name:c.val(),Description:a.val(),TypeCode:w.asDropdown("selected").value,Status:ut.is(":checked"),ViewRoleId:v.asDropdown("selected").value,ModifyRoleId:y.asDropdown("selected").value,AccessRoleId:p.asDropdown("selected").value,RowVersion:d}),success:function(n){k!==0&&r.asBootGrid("remove");r.asBootGrid("append",[n]);$.asShowMessage({message:$.asRes[$.asLang].successOpration})}},{$form:tt,overlayClass:"as-overlay-absolute"})});nt=function(){r.asBootGrid("destroy");ot.destroy()}};dt();$(g).append('<span id="asRegisterPage"><\/span>');i("#asRegisterPage").asRegisterPageEvent();typeof t!="undefined"&&$.asLoadPage(t,t.replace(/\//g,$.asUrlDelimeter))})