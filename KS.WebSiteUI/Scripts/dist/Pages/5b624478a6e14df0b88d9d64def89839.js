$("#i5b624478a6e14df0b88d9d64def89839").on($.asEvent.page.loaded,function(n,t,i){var l="#i5b624478a6e14df0b88d9d64def89839",a=".i5b624478a6e14df0b88d9d64def89839."+$.asPageClass,r=function(n){var t=new $.as({pageId:a});return t.as(n)},p=function(){},rt;$(l).on($.asEvent.page.dispose,function(){p()});$.asUrls=$.extend({cms_masterDataKeyValue_GetByDefaultsLanguageAndTypeId:"/odata/cms/MasterDataKeyValues?$filter=TypeId%20eq%20@typeIdd&$select=Id%2CParentId%2CCode%2CPathOrUrl%2COrder%2CName%2CIsLeaf%2CKey%2CValue",fms_get:"/fms/Get/@path",fms_save:"/fms/save"},$.asUrls);var h=$(a),w=r("#frmAddOrUpdateFile"),u=r("#fileEditor"),v=r("#winFind"),b=r("#txtFind"),k=r("#txtReplace"),d=r("#chkFindCase"),g=r("#chkFindWhole"),nt=r("#chkFindExp"),tt=r("#chkFindSelect"),at=r("#chkStatus"),ft=r("#lblEditor"),et=r("#btnNext"),ot=r("#btnPrev"),e=r("#drpEditorNames"),c=r("#txtFileName"),st=r("#btnCancel"),ht=r("#btnSave"),y=!1,f=0,s=[],o=null,it;v.asWindow({focusedId:"txtFind"});u.asCodeEditor();e.asDropdown({source:{hierarchy:{type:"flat",keyDataField:{name:"Id"},parentDataField:{name:"ParentId"},removeChildLessParent:!1},url:$.asInitService($.asUrls.cms_masterDataKeyValue_GetByDefaultsLanguageAndTypeId,[{name:"@typeId",value:1030}]),displayDataField:"Name",valueDataField:"Code",orderby:"Order"}});rt={txtFileName:{required:!0}};it=w.asValidate({rules:rt});var vt=function(){$.asStorage.setItem("fileEditor",u.asCodeEditor("getValue"))},ct=function(n){ft.html(n)},ut=function(){if(c.val(""),u.asCodeEditor("setValue",""),i.fileActionMode==="update"){var n=i.files[0].toLowerCase().split(".");i.files[0].toLowerCase().indexOf(".js")>-1?(e.asDropdown("selectValue","javascript"),u.asCodeEditor("setEditorMode","javascript")):i.files[0].toLowerCase().indexOf(".ts")>-1?(u.asCodeEditor("setEditorMode","typescript"),e.asDropdown("selectValue","typescript")):i.files[0].toLowerCase().indexOf(".txt")>-1?(u.asCodeEditor("setEditorMode","text"),e.asDropdown("selectValue","text")):i.files[0].toLowerCase().indexOf(".config")>-1?(u.asCodeEditor("setEditorMode","xml"),e.asDropdown("selectValue","xml")):i.files[0].toLowerCase().indexOf(".cs")>-1&&i.files[0].toLowerCase().indexOf(".css")===-1?(u.asCodeEditor("setEditorMode","csharp"),e.asDropdown("selectValue","csharp")):i.files[0].toLowerCase().indexOf(".vb")>-1?(u.asCodeEditor("setEditorMode","vbscript"),e.asDropdown("selectValue","vbscript")):i.files[0].toLowerCase().indexOf(".sql")>-1?(u.asCodeEditor("setEditorMode","sqlserver"),e.asDropdown("selectValue","sqlserver")):(e.asDropdown("selectValue",n[n.length-1]),u.asCodeEditor("setEditorMode",n[n.length-1]));c.val(i.files[0]);h.asAjax({url:$.asInitService($.asUrls.fms_get,[{name:"@path",value:$.asUrlAsParameter((i.path+"/"+i.files[0]).replace(new RegExp($.asUrlDelimeter,"gi"),"/").replace(new RegExp("//","gi"),"/"))+"/"}]),type:"get",success:function(n){u.asCodeEditor("setValue",n);$.asShowMessage({message:$.asRes[$.asLang].successOpration})}},{validate:!1,overlayClass:"as-overlay-absolute"})}},lt=function(){$(l).on($.asEvent.modal.reopen,function(n,t){(t.files!==i.files||t.fileActionMode!==i.fileActionMode||i.path!==t.path||t.parent!==i.parent||t.event!==i.event)&&(i=t,ut())});ht.on("click",function(){h.asAjax({url:$.asUrls.fms_save,data:JSON.stringify({Path:i.path.replace(new RegExp($.asUrlDelimeter,"gi"),"/").replace(new RegExp("//","gi"),"/"),Name:c.val(),Content:u.asCodeEditor("getValue")}),success:function(n){$.asShowMessage({message:$.asRes[$.asLang].successOpration});i.fileActionMode==="add"&&($(i.parent).trigger(i.event,[{name:c.val(),modifieLocalDateTime:n}]),h.asModal("hide"))}},{$form:w,overlayClass:"as-overlay-absolute"})});st.on("click",function(){h.asModal("hide")});p=function(){it.destroy()};$(l).on($.asEvent.page.ready,function(){u.asCodeEditor("focus");e.asDropdown("selectValue","text");u.asCodeEditor("setEditorMode","text");ut()});var t=function(){o.asCodeEditor("toggleCommentLines")},n=function(){o.asCodeEditor("find",b.val(),{backwards:!1,wrap:!1,range:tt.is(":checked")===!0?o.asCodeEditor("getSelectionRange"):null,caseSensitive:d.is(":checked"),wholeWord:g.is(":checked"),regExp:nt.is(":checked")})};u.asCodeEditor("editor").commands.addCommand({name:"Find",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){v.asWindow("show")},readOnly:!0});u.asCodeEditor("editor").commands.addCommand({name:"CommentToggel",bindKey:{win:"Ctrl-K",mac:"Command-K"},exec:function(){t()},readOnly:!1});ot.click(function(){y=!0;f=f===0?s.length-1:f;u.asCodeEditor("editor").gotoLine(s[f]);f>1&&f--});et.click(function(){y=!0;f=f===0?s.length-1:f;u.asCodeEditor("editor").gotoLine(s[f]);f<s.length-1&&f++});u.asCodeEditor("editor").getSession().on("change",function(){f=s.length-1});u.asCodeEditor("editor").on("focus",function(){o=u;ct("ویرایشگر");y=!1});u.asCodeEditor("editor").getSession().selection.on("changeCursor",function(){s.push(u.asCodeEditor("editor").selection.getCursor().row)});r("#btnToggleComment").click(function(){t()});r("#btnFindWindow").click(function(){v.asWindow("show")});e.on("change",function(n,t){u.asCodeEditor("setEditorMode",t.value)});b.on("input",function(){n()});d.change(function(){n()});g.change(function(){n()});nt.change(function(){n()});tt.change(function(){n()});r("#btnRecovery").click(function(){recoverEditor()});r("#btnReplace").click(function(){o.asCodeEditor("replace",k.val())});r("#btnReplaceAll").click(function(){o.asCodeEditor("replaceAll",k.val())});r("#btnFindNext").click(function(){o.asCodeEditor("findNext")});r("#btnFindPrev").click(function(){o.asCodeEditor("findPrevious")})};lt();$(a).append('<span id="asRegisterPage"><\/span>');r("#asRegisterPage").asRegisterPageEvent();typeof t!="undefined"&&$.asLoadPage(t,t.replace(/\//g,$.asUrlDelimeter))})