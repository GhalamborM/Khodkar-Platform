(function(n,t){t.FooNav={defaults:{after:null,before:null,buttons:null,classes:null,deeplinking:!1,icons:{back:{family:"fon-icon",icon:"fon-icon-back"},expand:{family:"fon-icon",icon:"fon-icon-expand"},home:{family:"fon-icon",icon:"fon-icon-home"},menu:{family:"fon-icon",icon:"fon-icon-menu"},top:{family:"fon-icon",icon:"fon-icon-top"}},items:"body",position:"fon-top-right",theme:"fon-light",title:null,top:!0,transition:"slide",scroll:0,speed:200,smart:{enable:!0,anchors:!0,close:!0,open:!1,remember:!0,scroll:!0,url:!0}},instances:[]};jQuery.Event.prototype.allow=!1;FooNav.fetch=function(n){return n=n>FooNav.instances.length-1?FooNav.instances.length-1:n<0?0:n,FooNav.instances[n]};FooNav.init=function(n){return new FooNav.Instance(n)};FooNav.reinit=function(n,t){FooNav.fetch(n).reinit(t)};FooNav.destroy=function(n){FooNav.fetch(n).destroy()};FooNav.destroyAll=function(){for(var t,n=0;n<FooNav.instances.length;n++)t=FooNav.instances[n],t!=null&&t.destroy()};FooNav.items=function(t,i,r){function a(t){for(var i=0;i<s.length;i++)if(n(t).is(s[i]))return i;return-1}function v(n){for(var i=[],t=0;t<n;t++)i.push(s[t]);return i.join(",")}function l(n,t){for(var r,i=0;i<t.length;i++){if(t[i].href=="#"+n)return t[i];if(t[i].children&&(r=l(n,t[i].children),r!=null))return r}return null}function y(t,i){return r==null||r==""?!0:n(i).closest(r).length==0}function p(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}t=t||"body";i=i||"h1,h2,h3,h4,h5,h6";r=r||"";var f=[],s=i.split(","),e=null,u=null,h=null,o=null,c=null;return n(t).find(i).filter(y).each(function(){if(u=this,c=n(u),(u.id==""||u.id==null)&&(u.id=p()),e={text:c.text(),href:"#"+u.id},o=v(a(u)),o!=null&&o!="")if(h=c.prevAll(o).first(),h.length>0){var t=l(h.attr("id"),f);t!=null?(t.children=t.children||[],t.children.push(e)):f.push(e)}else f.push(e);else f.push(e)}),f};FooNav.Timer=function(){this.id=null;var n=this;return this.start=function(t,i){n.stop();n.id=setTimeout(function(){n.id=null;t()},i)},this.stop=function(){n.id!=null&&(clearTimeout(n.id),n.id=null)},this};FooNav.Instance=function(i){this.id=FooNav.instances.push(this);this.index=this.id-1;this.o=n.extend(!0,{},FooNav.defaults);this.nav=null;this.inner=null;this.buttons=null;this.back=null;this.top=null;this.toggle_button=null;this.menu=null;this.initialized=!1;var r=this,u={},f=function(){};return u.ready=null,this.init=function(i){if(r.o=n.extend(!0,r.o,i),r.b.items(),r.b.nav(),r.b.buttons(),r.b.menu(),r.b.extra(),r.o.smart.enable){if(r.o.smart.url&&r.m.set(location.href,r.o.smart.open),r.o.smart.close)n(t).on("click",r.w.clicked);if(r.o.smart.anchors)n(t).on("scroll",r.a.check)}n(t).on("scroll",r.w.scrolled).on("resize",r.w.resized);return r.o.scroll==0&&r.nav.show(),setTimeout(function(){r.m.position(!1);r.initialized=!0;n.isFunction(u.ready)&&u.ready.call(r,r)},500),r},this.reinit=function(n){r.destroy(!0);r.init(n)},this.destroy=function(i){(r.initialized=!1,i=i||!1,n(t).off("scroll",r.a.check).off("scroll",r.w.scrolled).off("click",r.w.clicked).off("resize",r.w.resized),r.nav.remove(),r.o=n.extend(!0,{},FooNav.defaults),r.nav=r.inner=r.back=r.top=r.toggle_button=r.menu=null,i)||(FooNav.instances[r.index]=null)},this.ready=function(t){n.isFunction(t)&&(r.initialized==!0?t.call(r,r):u.ready=t)},this.toggle=function(){r.m.toggle({allow:!0})},this.u={_a:document.createElement("a"),qualify:function(n){return r.u._a.href=n,r.u._a.href},isCurrent:function(n){return r.u.qualify(n)==[location.protocol,"//",location.host,location.pathname].join("")},concat:function(){return Array.prototype.slice.call(arguments).join(" ")},position:function(){var n=r.o.position.split("-");return{v:n[1],h:n[2]}},exists:function(t,i,r){if(i=i||f,r=r||f,typeof t=="string"&&t.substring(0,1)=="#"){var u=n(t);return u.length>0?(i(u),!0):(r(),!1)}return r(),!1},viewportSize:function(){var n=typeof t.devicePixelRatio!="undefined"?t.devicePixelRatio:1;return{width:(t.innerWidth||document.documentElement.clientWidth||(document.body?document.body.offsetWidth:0))/n,height:(t.innerHeight||document.documentElement.clientHeight||(document.body?document.body.offsetHeight:0))/n}},_supportsTransitions:null,supportsTransitions:function(){var t;if(r.u._supportsTransitions!=null)return r.u._supportsTransitions;var f=document.body||document.documentElement,u=f.style,n="transition",i;if(typeof u[n]=="string")return!0;for(i=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<i.length;t++)if(typeof u[i[t]+n]=="string")return r.u._supportsTransitions=!0;return r.u._supportsTransitions=!1}},this.b={items:function(){if(!n.isArray(r.o.items)){var t=typeof r.o.items;t=="string"?r.o.items=FooNav.items(r.o.items):t=="object"&&(r.o.items=FooNav.items(r.o.items.container,r.o.items.selector,r.o.items.exclude))}},nav:function(){r.nav=n("<div><\/div>",{"class":r.u.concat("fon-nav",r.o.position,r.o.theme,r.o.classes),css:{display:"none"}}).on("click",".fon-item-link",r.m.clicked).on("click",".fon-item-back",r.m.back).appendTo("body")},buttons:function(){function u(t){var i=r.o.icons[t];return i?n("<span><\/span>",{"class":r.u.concat("fon-button-icon",i.family,i.icon)}):n()}var i,t;if(r.buttons=n("<div><\/div>",{"class":"fon-buttons"}).appendTo(r.nav),r.top=n("<a><\/a>",{"class":"fon-button fon-button-top",href:"#top",on:{click:r.w.top}}).append(u("top")).appendTo(r.buttons),r.toggle_button=n("<a><\/a>",{"class":"fon-button",href:"#toggle",on:{click:r.m.toggle}}).append(u("menu")).appendTo(r.buttons),typeof r.o.buttons=="object")for(i in r.o.buttons)if(r.o.buttons.hasOwnProperty(i)&&r.o.icons.hasOwnProperty(i))if(t=r.o.buttons[i],typeof t=="string"){if(i=="home"&&r.u.isCurrent(t))continue;n("<a><\/a>",{"class":"fon-button",href:t}).append(u(i)).appendTo(r.buttons)}else if(typeof t=="object"){if(typeof t.href!="string"||i=="home"&&r.u.isCurrent(t.href))continue;t["class"]=typeof t["class"]=="string"?r.u.concat("fon-button",t["class"]):"fon-button";n("<a><\/a>",t).append(u(i)).appendTo(r.buttons)}var o=r.toggle_button.outerHeight()*r.buttons.children().length,f=parseInt(r.buttons.css("top"),0),e=parseInt(r.buttons.css("bottom"),0),s=isNaN(f)?isNaN(e)?0:e:f;r.nav.css("min-height",o+s)},menu:function(){function t(t){var i=r.o.icons[t];return i?n("<span><\/span>",{"class":r.u.concat("fon-item-icon",i.family,i.icon)}):n()}function i(u,f,e){var c,a=e.length,l,o,h,s;for(f!=null?(o=n("<li><\/li>").appendTo(u),h=n("<a><\/a>",{"class":"fon-item fon-item-back",href:f.href,text:f.text}).prepend(t("back")).appendTo(o),r.u.exists(f.href)&&h.addClass("fon-anchored")):typeof r.o.title=="string"&&(o=n("<li><\/li>").appendTo(u),h=n("<span><\/span>",{"class":"fon-item fon-item-title fon-anchored",text:r.o.title}).appendTo(o)),c=0;c<a;c++)s=e[c],o=n("<li><\/li>").appendTo(u),h=n("<a><\/a>",{"class":"fon-item fon-item-link",href:s.href,text:s.text}).appendTo(o),r.u.exists(s.href)&&h.addClass("fon-anchored"),n.isArray(s.children)&&(h.addClass("fon-has-menu").prepend(t("expand")),l=n("<ul><\/ul>",{"class":"fon-menu"}).appendTo(o),i(l,s,s.children))}r.inner=n("<div><\/div>",{"class":"fon-nav-inner"}).appendTo(r.nav);r.menu=n("<ul><\/ul>",{"class":"fon-menu"});i(r.menu,null,r.o.items);r.inner.append(r.menu.clone())},extra:function(){r.o.before!=null&&r.nav.prepend(n("<div><\/div>",{"class":"fon-before"}).append(r.o.before));r.o.after!=null&&r.nav.append(n("<div><\/div>",{"class":"fon-after"}).append(r.o.after))}},this.m={position:function(n){n=n||!1;var t=r.u.position();n?(r.nav.css(t.h,0),r.nav.removeClass("fon-closed fon-user-closed").addClass("fon-open")):(r.nav.css(t.h,-r.nav.outerWidth(!0)),r.nav.removeClass("fon-open").addClass("fon-closed"))},exists:function(t,i,u){if(i=i||r.menu,u=u||!1,t==null&&u)return i.find("li > .fon-item-title").first();if(t=r.u.qualify(t),u){var f=i.find("li > .fon-item-back").filter(function(){return t==r.u.qualify(n(this).attr("href"))}).first();if(f.length>0)return f}return i.find("li > .fon-item-link").filter(function(){return t==r.u.qualify(n(this).attr("href"))}).first()},active:function(n,t,i){i=i||!1;t.find("li > .fon-active").removeClass("fon-active");var u=r.m.exists(n,t,i);u.length!=0&&u.addClass("fon-active")},size:function(t){var i=n(".fon-nav-size"),f=r.nav.find(".fon-before"),e=r.nav.find(".fon-after"),u;return i.length==0&&(i=n("<div><\/div>",{"class":"fon-nav-size"}).appendTo("body"),n("<div><\/div>",{"class":"fon-nav-inner"}).appendTo(i)),i.removeClass().addClass(r.u.concat("fon-nav-size",r.o.theme,r.o.classes,r.o.position)),u=i.find(".fon-nav-inner").empty().append(t.clone()),{height:u.height(),width:u.width(),before:{height:f.height(),width:f.width()},after:{height:e.height(),width:e.width()}}},resize:function(){var n=r.inner.children(".fon-menu:first");n.length!=0&&r.m.setSize(r.m.size(n))},setSize:function(n){if(typeof n.width=="number"&&typeof n.height=="number"){var t=r.u.viewportSize(),i=r.nav.height(),u=(n.before.height?n.before.height:0)+(n.after.height?n.after.height:0)+7;t.width<640&&(n.height=i-u);r.inner.css({width:n.width,height:n.height})}},get:function(n,t){return typeof n=="string"?r.m.exists(n,r.menu,t).closest(".fon-menu").clone():r.menu.clone()},set:function(n,t){t=t||!1;var i=r.m.get(n,!0);i.length!=0&&(r.inner.empty(),r.m.setSize(r.m.size(i)),r.inner.append(i),r.m.active(n,i,!0),r.m.position(t))},transition:function(n,t,i,u){var v;u=u||f;var o=r.m.size(t),s={height:r.inner.height(),width:r.inner.width()},h={},c={},l={},a={},e,y=r.u.viewportSize(),p=r.nav.height(),w=(o.before.height?o.before.height:0)+(o.after.height?o.after.height:0)+7;y.width<640&&(o.height=p-w);v=o.width!=s.width||o.height!=s.height?r.o.speed:0;switch(r.o.transition){case"fade":e="opacity";h[e]=c[e]=0;l[e]=1;a[e]="";break;default:e="left";h[e]=i?s.width:-s.width;c[e]=i?-s.width:s.width;l[e]=0;a[e]=""}r.inner.stop();n.stop().animate(h,r.o.speed,function(){n.remove();r.inner.animate(o,v,function(){r.inner.empty().append(t.css(c));t.animate(l,r.o.speed,function(){t.css(a);u()})})})},toggle:function(n){n.allow||(n.preventDefault(),n.stopPropagation());r.nav.toggleClass("fon-open");var i=r.nav.outerWidth(!0),t=r.nav.hasClass("fon-open"),u=r.u.position(),f=0,e=0,o={};t?f=-i:e=-i;o[u.h]=e;t?r.nav.removeClass("fon-closed fon-user-closed"):r.nav.addClass("fon-closing");r.nav.css(u.h,f).animate(o,r.o.speed,function(){if(!t&&r.nav!=null){if(r.o.smart.enable&&!r.o.smart.remember){var n=r.menu.clone();r.inner.empty();r.m.setSize(r.m.size(n));r.inner.append(n);r.m.position(!1)}r.nav.removeClass("fon-closing").addClass("fon-closed fon-user-closed")}})},back:function(t){var u=n(this),i=u.attr("href"),e=r.inner.find("> .fon-menu:last"),f=r.m.get(i),o=u.hasClass("fon-anchored");r.m.transition(e,f,!0,function(){r.m.active(i,f)});o&&r.o.smart.enable&&r.o.smart.scroll&&(t.preventDefault(),t.stopPropagation(),r.w.scroll(i),r.d.set(i.substring(1,i.length)))},clicked:function(t){var u=n(this),o=u.hasClass("fon-anchored"),s=u.hasClass("fon-has-menu"),i=u.attr("href"),e,f;u.parents(".fon-menu:first").find("li > .fon-active").removeClass("fon-active");u.addClass("fon-active");s&&(e=r.inner.find("> .fon-menu:last"),f=r.m.get(i,!0),r.m.transition(e,f,!1,function(){r.m.active(i,f,!0)}));o&&r.o.smart.enable&&r.o.smart.scroll?(t.preventDefault(),t.stopPropagation(),r.w.scroll(i),r.d.set(i.substring(1,i.length))):i.substring(0,1)=="#"&&r.o.smart.enable&&r.o.smart.scroll&&(t.preventDefault(),t.stopPropagation())}},this.d={set:function(n){r.o.deeplinking&&(t.history&&t.history.pushState?t.history.replaceState(null,document.title,t.location.pathname+t.location.search+"#"+n):t.location.replace((""+t.location).split("#")[0]+"#"+n))},clear:function(){r.o.deeplinking&&(t.history&&t.history.pushState?t.history.replaceState(null,document.title,t.location.pathname+t.location.search):t.location.replace((""+t.location).split("#")[0]+"#/"))}},this.a={_check:new FooNav.Timer,tracked:{elements:[],build:function(t){for(var i,f,u=0;u<t.length;u++)if(i=t[u],n.isArray(i.children)&&r.a.tracked.build(i.children),typeof i.href=="string"&&i.href.substring(0,1)=="#"){if(f=n(i.href),f.length==0)continue;r.a.tracked.elements.push(f.addClass("fon-tracked"))}},get:function(){return r.a.tracked.elements.length>0?r.a.tracked.elements:(r.a.tracked.elements=[],r.a.tracked.build(r.o.items),r.a.tracked.elements)}},visible:function(n){var t=n.getBoundingClientRect(),i=20;return t.top>=-i&&t.left>=-i},check:function(){r.a._check.start(function(){var l=n(t).scrollTop();if(l<=r.o.scroll)r.m.set(null,r.nav.hasClass("fon-open"));else{for(var u=r.a.tracked.get(),f=[],e=0,o,s=n(),h,c,i=0;i<u.length;i++)r.a.visible(u[i].get(0))&&f.push(u[i]);for(i=0;i<f.length;i++)o=f[i],h=o.offset(),(e==0||h.top<e)&&(e=h.top,s=o);if(s.length==0)return;c=s.attr("id");r.m.set("#"+c,r.nav.hasClass("fon-open")||!r.nav.hasClass("fon-user-closed")&&r.o.smart.open);r.d.set(c)}},100)}},this.w={_scroll:new FooNav.Timer,_scrolled:new FooNav.Timer,_resized:new FooNav.Timer,scroll:function(i){r.a._check.stop();var u=n(i),f=u.offset().top;n(t).off("scroll",r.a.check);r.w._scroll.stop();n("html, body").stop().animate({scrollTop:f},800,function(){r.w._scroll.start(function(){r.w._to=null;n(t).on("scroll",r.a.check)},100)});r.o.smart.enable&&r.o.smart.scroll},scrolled:function(){r.w._scrolled.start(function(){var i=n(t).scrollTop();r.o.top&&(i>0?r.top.addClass("fon-show"):r.top.removeClass("fon-show"),r.u.supportsTransitions()||(i>0?r.top.slideDown(500):r.top.slideUp(500)));r.o.scroll!=0&&(i>r.o.scroll?r.nav.fadeIn(r.o.speed):r.nav.fadeOut(r.o.speed))},100)},clicked:function(t){!r.nav.hasClass("fon-open")||r.nav.hasClass("fon-closing")||n(t.target).is("fon-nav")||n(t.target).closest(".fon-nav").length!=0||(t.allow=!0,r.m.toggle.call(r.toggle_button.get(0),t))},top:function(t){t.preventDefault();t.stopPropagation();r.o.smart.enable&&r.o.smart.scroll?n("html, body").stop().animate({scrollTop:0},1e3):n("html, body").scrollTop(0)},resized:function(){r.w._resized.start(function(){r.m.resize()},100)}},this.init(i)}})(jQuery,window),function(n){"use strict";n.fn.asOffCanvas=function(t){var u=n.as(this),i,f,r=u.data("menu"),o=this,e;return n.type(t)==="string"?r[t]():(e=function(f){f.length>0&&(i.hierarchy.type="tree",n.asSort({array:f,order:i.order,orderby:i.orderby,type:i.datatype,hierarchy:i.hierarchy}),t=n.extend({items:JSON.parse(JSON.stringify(f).replace(new RegExp('"'+i.text+'":',"g"),'"text":').replace(new RegExp('"'+i.href+'":',"g"),'"href":').replace(new RegExp('"'+i.children+'":',"g"),'"children":'))},t),r=FooNav.init(t),u.data("menu",r));window.onresize=function(){r.reinit(t)}},i=n.extend({datatype:"json",order:"asc",orderby:"order",loadComplete:e,page:o},t.source),i.hierarchy=n.extend({convertchildByZeroLengthToNull:!0},t.source.hierarchy),f=n.extend({extraSettings:{loadingText:n.asWaitingViewSmall}},t.dataAdepter),i.orderbyDesc&&(i.orderby=i.orderbyDesc),delete i.orderbyDesc,delete t.source,delete t.dataAdapter,u.asDataAdepter(i,f)),this}}(jQuery)