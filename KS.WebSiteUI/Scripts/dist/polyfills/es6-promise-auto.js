!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):b.ES6Promise=a()}(this,function(){function aV(a){return"function"==typeof a||"object"==typeof a&&null!==a}function ak(a){return"function"==typeof a}function aF(a){av=a}function aP(a){ay=a}function aI(){return function(){return process.nextTick(ac)}}function au(){return"undefined"!=typeof at?function(){at(ac)}:ag()}function aS(){var c=0,a=new a2(ac),b=document.createTextNode("");return a.observe(b,{characterData:!0}),function(){b.data=c=++c%2}}function aY(){var a=new MessageChannel;return a.port1.onmessage=ac,function(){return a.port2.postMessage(0)}}function ag(){var a=setTimeout;return function(){return a(ac,1)}}function ac(){for(var c=0;c<aq;c+=2){var a=aa[c],b=aa[c+1];a(b),aa[c]=void 0,aa[c+1]=void 0}aq=0}function an(){try{var c=require,a=c("vertx");return at=a.runOnLoop||a.runOnContext,au()}catch(b){return ag()}}function aB(g,a){var c=arguments,f=this,d=new this.constructor(aL);void 0===d[am]&&az(d);var b=f._state;return b?!function(){var e=c[b-1];ay(function(){return a5(b,d,e,f._result)})}():al(f,d,g,a),d}function ar(c){var a=this;if(c&&"object"==typeof c&&c.constructor===a){return c}var b=new a(aL);return ap(b,c),b}function aL(){}function a1(){return new TypeError("You cannot resolve a promise with itself")}function ai(){return new TypeError("A promises callback cannot return that same promise.")}function ab(b){try{return b.then}catch(a){return aw.error=a,aw}}function a7(f,a,b,d){try{f.call(a,b,d)}catch(c){return c}}function aD(c,a,b){ay(function(f){var e=!1,d=a7(b,a,function(g){e||(e=!0,a!==g?ap(f,g):aT(f,g))},function(g){e||(e=!0,ax(f,g))},"Settle: "+(f._label||" unknown promise"));!e&&d&&(e=!0,ax(f,d))},c)}function ae(b,a){a._state===aR?aT(b,a._result):a._state===aK?ax(b,a._result):al(a,void 0,function(c){return ap(b,c)},function(c){return ax(b,c)})}function a3(c,a,b){a.constructor===c.constructor&&b===aB&&a.constructor.resolve===ar?ae(c,a):b===aw?(ax(c,aw.error),aw.error=null):void 0===b?aT(c,a):ak(b)?aD(c,a,b):aT(c,a)}function ap(a,b){a===b?ax(a,a1()):aV(b)?a3(a,b,ab(b)):aT(a,b)}function ad(a){a._onerror&&a._onerror(a._result),aW(a)}function aT(b,a){b._state===aH&&(b._result=a,b._state=aR,0!==b._subscribers.length&&ay(aW,b))}function ax(b,a){b._state===aH&&(b._state=aK,b._result=a,ay(ad,b))}function al(g,a,c,f){var d=g._subscribers,b=d.length;g._onerror=null,d[b]=a,d[b+aR]=c,d[b+aK]=f,0===b&&g._state&&ay(aW,g)}function aW(h){var a=h._subscribers,c=h._state;if(0!==a.length){for(var f=void 0,d=void 0,b=h._result,g=0;g<a.length;g+=3){f=a[g],d=a[g+c],f?a5(c,f,d,b):d(b)}h._subscribers.length=0}}function aE(){this.error=null}function aM(c,a){try{return c(a)}catch(b){return aU.error=b,aU}}function a5(k,f,h,g){var e=ak(h),j=void 0,l=void 0,d=void 0,b=void 0;if(e){if(j=aM(h,g),j===aU?(b=!0,l=j.error,j.error=null):d=!0,f===j){return void ax(f,ai())}}else{j=g,d=!0}f._state!==aH||(e&&d?ap(f,j):b?ax(f,l):k===aR?aT(f,j):k===aK&&ax(f,j))}function ah(c,a){try{a(function(d){ap(c,d)},function(d){ax(c,d)})}catch(b){ax(c,b)}}function aJ(){return a0++}function az(a){a[am]=a0++,a._state=void 0,a._result=void 0,a._subscribers=[]}function a8(b,a){this._instanceConstructor=b,this.promise=new b(aL),this.promise[am]||az(this.promise),af(a)?(this._input=a,this.length=a.length,this._remaining=a.length,this._result=new Array(this.length),0===this.length?aT(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&aT(this.promise,this._result))):ax(this.promise,aN())}function aN(){return new Error("Array Methods must be provided an Array")}function ao(a){return new a8(this,a).promise}function aj(b){var a=this;return new a(af(b)?function(d,f){for(var e=b.length,c=0;c<e;c++){a.resolve(b[c]).then(d,f)}}:function(d,c){return c(new TypeError("You must pass an array to race."))})}function aA(c){var a=this,b=new a(aL);return ax(b,c),b}function aC(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function aG(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function aZ(a){this[am]=aJ(),this._result=this._state=void 0,this._subscribers=[],aL!==a&&("function"!=typeof a&&aC(),this instanceof aZ?ah(this,a):aG())}function a4(){var d=void 0;if("undefined"!=typeof global){d=global}else{if("undefined"!=typeof self){d=self}else{try{d=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var b=d.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast){return}}d.Promise=aZ}var a9=void 0;a9=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var af=a9,aq=0,at=void 0,av=void 0,ay=function(b,a){aa[aq]=b,aa[aq+1]=a,aq+=2,2===aq&&(av?av(ac):aX())},aO="undefined"!=typeof window?window:void 0,aQ=aO||{},a2=aQ.MutationObserver||aQ.WebKitMutationObserver,a6="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,aa=new Array(1000),aX=void 0;aX=a6?aI():a2?aS():ba?aY():void 0===aO&&"function"==typeof require?an():ag();var am=Math.random().toString(36).substring(16),aH=void 0,aR=1,aK=2,aw=new aE,aU=new aE,a0=0;return a8.prototype._enumerate=function(){for(var c=this.length,a=this._input,b=0;this._state===aH&&b<c;b++){this._eachEntry(a[b],b)}},a8.prototype._eachEntry=function(g,a){var c=this._instanceConstructor,f=c.resolve;if(f===ar){var d=ab(g);if(d===aB&&g._state!==aH){this._settledAt(g._state,a,g._result)}else{if("function"!=typeof d){this._remaining--,this._result[a]=g}else{if(c===aZ){var b=new c(aL);a3(b,g,d),this._willSettleAt(b,a)}else{this._willSettleAt(new c(function(h){return h(g)}),a)}}}}else{this._willSettleAt(f(g),a)}},a8.prototype._settledAt=function(d,a,b){var c=this.promise;c._state===aH&&(this._remaining--,d===aK?ax(c,b):this._result[a]=b),0===this._remaining&&aT(c,this._result)},a8.prototype._willSettleAt=function(c,a){var b=this;al(c,void 0,function(d){return b._settledAt(aR,a,d)},function(d){return b._settledAt(aK,a,d)})},aZ.all=ao,aZ.race=aj,aZ.resolve=ar,aZ.reject=aA,aZ._setScheduler=aF,aZ._setAsap=aP,aZ._asap=ay,aZ.prototype={constructor:aZ,then:aB,"catch":function(a){return this.then(null,a)}},aZ.polyfill=a4,aZ.Promise=aZ,aZ.polyfill(),aZ});